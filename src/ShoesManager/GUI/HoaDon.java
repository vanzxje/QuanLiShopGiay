package ShoesManager.GUI;

import ShoesManager.BUS.ChiTietHDBUS;
import ShoesManager.BUS.ChiTietKMBUS;
import ShoesManager.BUS.HoaDonBUS;
import ShoesManager.BUS.KhachHangBUS;
import ShoesManager.BUS.KhuyenMaiBUS;
import ShoesManager.BUS.SanPhamBUS;
import ShoesManager.DTO.ChiTietHDDTO;
import ShoesManager.DTO.ChiTietKMDTO;
import ShoesManager.DTO.HoaDonDTO;
import ShoesManager.DTO.KhachHangDTO;
import ShoesManager.DTO.KhuyenMaiDTO;
import ShoesManager.DTO.SanPhamDTO;
import java.awt.*;
import java.awt.event.*;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.Date;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class HoaDon extends javax.swing.JFrame  implements MouseListener{

    public HoaDon() throws Exception {
        this.setUndecorated(true);

        init();
        initComponents();
        actionVisiblePanel();
        pThongTin_ThongTin.setVisible(true);
        // các hàm xử lý sau khi vào
        kiemTraCapBac();
        colordefault();
        anHienCacNut(false);
        
        // hiển thị các dữ liệu table
        actionButtondisplay();
        actionButtondisplayChiTiet();
        
        // cac su kien khac
        actionTFChiTiet();
        
        //chinh sua cac cbb
        nhapLuongKH();
        nhapLuongKM();
        
        //hien thi hoac an thanh menu
        if (!Memory.flag_Menu) {
            pTop.setVisible(false);
            menuThanhCongcu.setText("Hiện thanh công cụ");
        }
        
        // hiển thị rdbtn
        rdbtnThongTin_Tang.setSelected(true);
        rdbtnCT_Tang.setSelected(true);
        rdbtnCT_Tang1.setSelected(true);
        tfThongTin_MaNV.setText(Memory.maNV);
        
        tblThongTin.setAutoCreateRowSorter(true);
        tblThongTin1.setAutoCreateRowSorter(true);
    }
    
    private CacHamQuanTrong cachamquantrong;
    private Color colorPanel_Top, colorPanel_Center, colorText;
    private JLabel[] listLblTop;
    private String[] strArr_Top;
    private HoaDonBUS list_HD;
    private ChiTietHDBUS list_ChiTietHD;
    private ChiTietKMBUS list_ChiTietKM;
    private SanPhamBUS list_SanPham;
    private KhachHangBUS list_KH;
    private KhuyenMaiBUS list_KM;
    private DefaultTableModel model, modelChiTiet;
    private double TongTien;
    private HoaDonDTO hoadon;
    private String[] strMonths = {"Jan","Feb","Mar","Apr","May","Jun",
                                  "Jul","Aug","Sep","Oct","Nov","Dec"};
    /**
         * Ngày của hệ thống
         */
    private String date1 = LocalDateTime.now().getDayOfMonth() + " " +
                LocalDateTime.now().getMonth() + " " +
                LocalDateTime.now().getYear();
    
        
    public void init() throws Exception {
        colorPanel_Top = Memory.colorThemes;
        colorPanel_Center = Memory.colorThemes_2;
        colorText = Memory.colorText;
        
        list_HD = new HoaDonBUS();
        list_ChiTietHD = new ChiTietHDBUS();
        list_ChiTietKM = new ChiTietKMBUS();
        list_SanPham = new SanPhamBUS();
        list_KH = new KhachHangBUS();
        list_KM = new KhuyenMaiBUS();
        hoadon = new HoaDonDTO();
        cachamquantrong = new CacHamQuanTrong();
        
        
        strArr_Top = new String[10];
        strArr_Top[0] = "Hóa đơn";
        strArr_Top[1] = "Khuyến mãi";
        strArr_Top[2] = "Nhập hàng";
        strArr_Top[3] = "Hàng hóa";
        strArr_Top[4] = "Thống kê";
        strArr_Top[5] = "Excel";
        strArr_Top[6] = "Trở về";
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup_MauNen = new javax.swing.ButtonGroup();
        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        buttonGroup3 = new javax.swing.ButtonGroup();
        pCenter = new javax.swing.JPanel();
        pThongTin = new javax.swing.JPanel();
        lblThongTin_ThongTin = new javax.swing.JLabel();
        lblThongTin_TimKiem = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tblThongTin = new javax.swing.JTable();
        pThongTin_ThongTin = new javax.swing.JPanel();
        lblThongTin_MaHD = new javax.swing.JLabel();
        lblThongTin_MaKH = new javax.swing.JLabel();
        lblThongTin_MaNV = new javax.swing.JLabel();
        lblThongTin_MaKM = new javax.swing.JLabel();
        lblThongTin_NgayBan = new javax.swing.JLabel();
        lblThongTin_TongTien = new javax.swing.JLabel();
        btnThongTin_Them = new javax.swing.JButton();
        btnThongTin_Xoa = new javax.swing.JButton();
        tfThongTin_MaHD = new javax.swing.JTextField();
        tfThongTin_MaNV = new javax.swing.JTextField();
        tfThongTin_TongTien = new javax.swing.JTextField();
        calendarThongTin = new com.toedter.calendar.JDateChooser();
        btnThongTin_Sua1 = new javax.swing.JButton();
        btnThongTin_Trong = new javax.swing.JButton();
        cbbThongTin_MaKH = new javax.swing.JComboBox<>();
        cbbThongTin_MaKM = new javax.swing.JComboBox<>();
        tfThongTin_TenKH = new javax.swing.JTextField();
        pThongTin_TimKiem = new javax.swing.JPanel();
        lblThongTin_MaKH1 = new javax.swing.JLabel();
        lblThongTin_TongTien1 = new javax.swing.JLabel();
        lblThongTin_MaHD1 = new javax.swing.JLabel();
        lblThongTin_MaNV1 = new javax.swing.JLabel();
        lblThongTin_MaKM1 = new javax.swing.JLabel();
        btnTimKiem_TimKiem = new javax.swing.JButton();
        btnTimKiem_HuyTimKiem = new javax.swing.JButton();
        tfTimKiem_MaHD1 = new javax.swing.JTextField();
        tfTimKiem_MaKM1 = new javax.swing.JTextField();
        tfTimKiem_MaKH1 = new javax.swing.JTextField();
        tfTimKiem_MaNV1 = new javax.swing.JTextField();
        tfTimKiem_TongTien1 = new javax.swing.JTextField();
        btnTimKiem_Trong1 = new javax.swing.JButton();
        rdbtnThongTin_Tang = new javax.swing.JRadioButton();
        rdbtnThongTin_Giam = new javax.swing.JRadioButton();
        pChiTiet = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tblThongTin1 = new javax.swing.JTable();
        lblChiTiet_ChiTietHoaDon = new javax.swing.JLabel();
        pChiTietSanPham = new javax.swing.JPanel();
        lblChiTiet_SL = new javax.swing.JLabel();
        btnChiTiet_Xoa = new javax.swing.JButton();
        lblChiTiet_Gia = new javax.swing.JLabel();
        btnChiTiet_Sua = new javax.swing.JButton();
        tfChiTiet_MaSP = new javax.swing.JTextField();
        tfChiTiet_MaHD = new javax.swing.JTextField();
        tfChiTiet_SL = new javax.swing.JTextField();
        lblChiTiet_MaSP = new javax.swing.JLabel();
        tfChiTiet_Gia = new javax.swing.JTextField();
        lblChiTiet_MaHD = new javax.swing.JLabel();
        btnChiTiet_Them = new javax.swing.JButton();
        lblChiTiet_3cham = new javax.swing.JLabel();
        btnChiTiet_TaoMoi = new javax.swing.JButton();
        pChiTietTimKiem = new javax.swing.JPanel();
        lblChiTiet_SoLuong2 = new javax.swing.JLabel();
        jButton4 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        tfChiTiet_MaSP2 = new javax.swing.JTextField();
        lblChiTiet_MaSP1 = new javax.swing.JLabel();
        jButton6 = new javax.swing.JButton();
        lblMuiTen = new javax.swing.JLabel();
        lblMuiTen1 = new javax.swing.JLabel();
        lblChiTiet_3cham1 = new javax.swing.JLabel();
        lblChiTiet_3cham2 = new javax.swing.JLabel();
        tfChiTiet_SL2 = new javax.swing.JTextField();
        tfChiTiet_SL3 = new javax.swing.JTextField();
        tfChiTiet_MaSP3 = new javax.swing.JTextField();
        rdbtnCT_Tang = new javax.swing.JRadioButton();
        rdbtnCT_Giam = new javax.swing.JRadioButton();
        rdbtnCT_Giam1 = new javax.swing.JRadioButton();
        rdbtnCT_Tang1 = new javax.swing.JRadioButton();
        rdbtnCT_Khong2 = new javax.swing.JRadioButton();
        rdbtnCT_Khong = new javax.swing.JRadioButton();
        lblChiTiet_Tatca = new javax.swing.JLabel();
        lblChiTiet_Xuat = new javax.swing.JLabel();
        pTop = createPanel_LblTop(strArr_Top);
        menubar = new javax.swing.JMenuBar();
        menuTaiKhoan = new javax.swing.JMenu();
        menuTaiKhoan_ThongTin = new javax.swing.JMenuItem();
        menuTaiKhoan_DangXuat = new javax.swing.JMenuItem();
        menuThanhCongcu = new javax.swing.JMenu();
        MenuMauNen = new javax.swing.JMenu();
        rdbtnThongTin_MauCam = new javax.swing.JRadioButtonMenuItem();
        rdbtnThongTin_MauDen = new javax.swing.JRadioButtonMenuItem();
        rdbtnThongTin_Mautrang = new javax.swing.JRadioButtonMenuItem();
        menuTroVe = new javax.swing.JMenu();
        menuThoat = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(1280, 720));
        setResizable(false);
        setSize(new java.awt.Dimension(1280, 720));
        addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseDragged(java.awt.event.MouseEvent evt) {
                formMouseDragged(evt);
            }
        });
        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                formMousePressed(evt);
            }
        });

        pCenter.setBackground(colorPanel_Center);
        pCenter.setPreferredSize(new java.awt.Dimension(1280, 600));

        pThongTin.setBackground(colorPanel_Center);
        pThongTin.setBorder(javax.swing.BorderFactory.createLineBorder(colorPanel_Top, 5));
        pThongTin.setPreferredSize(new java.awt.Dimension(340, 580));
        pThongTin.setVerifyInputWhenFocusTarget(false);

        lblThongTin_ThongTin.setBackground(new java.awt.Color(255, 255, 255));
        lblThongTin_ThongTin.setForeground(new java.awt.Color(255, 255, 255));
        lblThongTin_ThongTin.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/210_70/Tìm kiếm.png"))); // NOI18N
        lblThongTin_ThongTin.setMaximumSize(new java.awt.Dimension(210, 131));
        lblThongTin_ThongTin.setMinimumSize(new java.awt.Dimension(210, 131));
        lblThongTin_ThongTin.setName("pThongTin_ThongTin"); // NOI18N
        lblThongTin_ThongTin.setPreferredSize(new java.awt.Dimension(210, 131));
        lblThongTin_ThongTin.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                lblThongTin_ThongTinMouseReleased(evt);
            }
        });

        lblThongTin_TimKiem.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/210_70/Thông tin.png"))); // NOI18N
        lblThongTin_TimKiem.setName("pThongTin_TiemKiem"); // NOI18N
        lblThongTin_TimKiem.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                lblThongTin_TimKiemMouseReleased(evt);
            }
        });

        tblThongTin.setAutoCreateRowSorter(true);
        tblThongTin.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã HĐ", "Mã KH", "Mã NV", "Mã KM", "Ngày Bán", "Tổng tiền"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblThongTin.setGridColor(new java.awt.Color(102, 255, 102));
        tblThongTin.setSelectionBackground(new java.awt.Color(204, 204, 204));
        tblThongTin.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblThongTinMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tblThongTin);
        if (tblThongTin.getColumnModel().getColumnCount() > 0) {
            tblThongTin.getColumnModel().getColumn(0).setPreferredWidth(60);
            tblThongTin.getColumnModel().getColumn(1).setPreferredWidth(60);
            tblThongTin.getColumnModel().getColumn(2).setPreferredWidth(60);
            tblThongTin.getColumnModel().getColumn(3).setPreferredWidth(60);
            tblThongTin.getColumnModel().getColumn(4).setPreferredWidth(90);
            tblThongTin.getColumnModel().getColumn(5).setPreferredWidth(90);
        }

        pThongTin_ThongTin.setBackground(colorPanel_Center);
        pThongTin_ThongTin.setPreferredSize(new java.awt.Dimension(405, 280));

        lblThongTin_MaHD.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaHD.setForeground(colorText);
        lblThongTin_MaHD.setText("Mã hóa đơn");

        lblThongTin_MaKH.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaKH.setForeground(colorText);
        lblThongTin_MaKH.setText("Mã khách hàng");

        lblThongTin_MaNV.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaNV.setForeground(colorText);
        lblThongTin_MaNV.setText("Mã nhân viên");

        lblThongTin_MaKM.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaKM.setForeground(colorText);
        lblThongTin_MaKM.setText("Mã khuyến mãi");

        lblThongTin_NgayBan.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_NgayBan.setForeground(colorText);
        lblThongTin_NgayBan.setText("Ngày bán");

        lblThongTin_TongTien.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_TongTien.setForeground(colorText);
        lblThongTin_TongTien.setText("Tổng tiền");

        btnThongTin_Them.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnThongTin_Them.setText("Thêm");
        btnThongTin_Them.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThongTin_ThemActionPerformed(evt);
            }
        });

        btnThongTin_Xoa.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnThongTin_Xoa.setText("Xóa");
        btnThongTin_Xoa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThongTin_XoaActionPerformed(evt);
            }
        });

        tfThongTin_MaHD.setEditable(false);
        tfThongTin_MaHD.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfThongTin_MaHD.setPreferredSize(new java.awt.Dimension(170, 28));
        tfThongTin_MaHD.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tfThongTin_MaHDMouseClicked(evt);
            }
        });
        tfThongTin_MaHD.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tfThongTin_MaHDActionPerformed(evt);
            }
        });

        tfThongTin_MaNV.setEditable(false);
        tfThongTin_MaNV.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfThongTin_MaNV.setPreferredSize(new java.awt.Dimension(170, 28));

        tfThongTin_TongTien.setEditable(false);
        tfThongTin_TongTien.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfThongTin_TongTien.setPreferredSize(new java.awt.Dimension(170, 28));

        calendarThongTin.setDate(new java.util.Date(1716377574000L));
        calendarThongTin.setDateFormatString("dd / MM / yyyy");
        calendarThongTin.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        btnThongTin_Sua1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnThongTin_Sua1.setText("Sửa");
        btnThongTin_Sua1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThongTin_Sua1ActionPerformed(evt);
            }
        });

        btnThongTin_Trong.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnThongTin_Trong.setText("Tạo Mới");
        btnThongTin_Trong.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnThongTin_TrongMouseClicked(evt);
            }
        });
        btnThongTin_Trong.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThongTin_TrongActionPerformed(evt);
            }
        });

        cbbThongTin_MaKH.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        cbbThongTin_MaKH.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "KH1", "KH2" }));
        cbbThongTin_MaKH.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbbThongTin_MaKHActionPerformed(evt);
            }
        });

        cbbThongTin_MaKM.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        cbbThongTin_MaKM.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "KM1", "KM2" }));

        tfThongTin_TenKH.setEditable(false);
        tfThongTin_TenKH.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfThongTin_TenKH.setPreferredSize(new java.awt.Dimension(170, 28));

        javax.swing.GroupLayout pThongTin_ThongTinLayout = new javax.swing.GroupLayout(pThongTin_ThongTin);
        pThongTin_ThongTin.setLayout(pThongTin_ThongTinLayout);
        pThongTin_ThongTinLayout.setHorizontalGroup(
            pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pThongTin_ThongTinLayout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pThongTin_ThongTinLayout.createSequentialGroup()
                        .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblThongTin_NgayBan)
                            .addComponent(lblThongTin_MaHD)
                            .addComponent(lblThongTin_MaKH)
                            .addComponent(lblThongTin_MaNV)
                            .addComponent(lblThongTin_MaKM)
                            .addComponent(lblThongTin_TongTien))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pThongTin_ThongTinLayout.createSequentialGroup()
                                .addComponent(cbbThongTin_MaKH, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(tfThongTin_TenKH, javax.swing.GroupLayout.PREFERRED_SIZE, 1, Short.MAX_VALUE))
                            .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(tfThongTin_MaNV, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(tfThongTin_TongTien, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(calendarThongTin, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(cbbThongTin_MaKM, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(tfThongTin_MaHD, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                    .addGroup(pThongTin_ThongTinLayout.createSequentialGroup()
                        .addComponent(btnThongTin_Them)
                        .addGap(18, 18, 18)
                        .addComponent(btnThongTin_Xoa)
                        .addGap(18, 18, 18)
                        .addComponent(btnThongTin_Sua1)
                        .addGap(18, 18, 18)
                        .addComponent(btnThongTin_Trong)))
                .addContainerGap())
        );
        pThongTin_ThongTinLayout.setVerticalGroup(
            pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pThongTin_ThongTinLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_MaHD)
                    .addComponent(tfThongTin_MaHD, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_MaKH)
                    .addComponent(cbbThongTin_MaKH, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(tfThongTin_TenKH, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_MaNV)
                    .addComponent(tfThongTin_MaNV, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_MaKM)
                    .addComponent(cbbThongTin_MaKM, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblThongTin_NgayBan)
                    .addComponent(calendarThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_TongTien)
                    .addComponent(tfThongTin_TongTien, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pThongTin_ThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThongTin_Them)
                    .addComponent(btnThongTin_Xoa)
                    .addComponent(btnThongTin_Sua1)
                    .addComponent(btnThongTin_Trong))
                .addContainerGap(17, Short.MAX_VALUE))
        );

        pThongTin_TimKiem.setBackground(colorPanel_Center);
        pThongTin_TimKiem.setPreferredSize(new java.awt.Dimension(405, 280));

        lblThongTin_MaKH1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaKH1.setForeground(colorText);
        lblThongTin_MaKH1.setText("Mã khách hàng");

        lblThongTin_TongTien1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_TongTien1.setForeground(colorText);
        lblThongTin_TongTien1.setText("Tổng tiền");

        lblThongTin_MaHD1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaHD1.setForeground(colorText);
        lblThongTin_MaHD1.setText("Mã hóa đơn");

        lblThongTin_MaNV1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaNV1.setForeground(colorText);
        lblThongTin_MaNV1.setText("Mã nhân viên");

        lblThongTin_MaKM1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblThongTin_MaKM1.setForeground(colorText);
        lblThongTin_MaKM1.setText("Mã khuyến mãi");

        btnTimKiem_TimKiem.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnTimKiem_TimKiem.setText("Tìm kiếm");
        btnTimKiem_TimKiem.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnTimKiem_TimKiemMouseClicked(evt);
            }
        });
        btnTimKiem_TimKiem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTimKiem_TimKiemActionPerformed(evt);
            }
        });

        btnTimKiem_HuyTimKiem.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnTimKiem_HuyTimKiem.setText("Hủy tìm kiếm");
        btnTimKiem_HuyTimKiem.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnTimKiem_HuyTimKiemMouseClicked(evt);
            }
        });
        btnTimKiem_HuyTimKiem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTimKiem_HuyTimKiemActionPerformed(evt);
            }
        });

        tfTimKiem_MaHD1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfTimKiem_MaHD1.setPreferredSize(new java.awt.Dimension(170, 28));

        tfTimKiem_MaKM1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfTimKiem_MaKM1.setPreferredSize(new java.awt.Dimension(170, 28));

        tfTimKiem_MaKH1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfTimKiem_MaKH1.setPreferredSize(new java.awt.Dimension(170, 28));
        tfTimKiem_MaKH1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tfTimKiem_MaKH1ActionPerformed(evt);
            }
        });

        tfTimKiem_MaNV1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfTimKiem_MaNV1.setPreferredSize(new java.awt.Dimension(170, 28));

        tfTimKiem_TongTien1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfTimKiem_TongTien1.setPreferredSize(new java.awt.Dimension(170, 28));

        btnTimKiem_Trong1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnTimKiem_Trong1.setText("Trống");
        btnTimKiem_Trong1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnTimKiem_Trong1MouseClicked(evt);
            }
        });
        btnTimKiem_Trong1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTimKiem_Trong1ActionPerformed(evt);
            }
        });

        rdbtnThongTin_Tang.setBackground(colorPanel_Center);
        buttonGroup1.add(rdbtnThongTin_Tang);
        rdbtnThongTin_Tang.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnThongTin_Tang.setForeground(colorText);
        rdbtnThongTin_Tang.setText("Tăng dần");

        rdbtnThongTin_Giam.setBackground(colorPanel_Center);
        buttonGroup1.add(rdbtnThongTin_Giam);
        rdbtnThongTin_Giam.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnThongTin_Giam.setForeground(colorText);
        rdbtnThongTin_Giam.setText("Giảm dần");

        javax.swing.GroupLayout pThongTin_TimKiemLayout = new javax.swing.GroupLayout(pThongTin_TimKiem);
        pThongTin_TimKiem.setLayout(pThongTin_TimKiemLayout);
        pThongTin_TimKiemLayout.setHorizontalGroup(
            pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pThongTin_TimKiemLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblThongTin_MaKH1)
                    .addComponent(lblThongTin_MaHD1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addComponent(tfTimKiem_TongTien1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(tfTimKiem_MaKM1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(tfTimKiem_MaNV1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(tfTimKiem_MaKH1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(tfTimKiem_MaHD1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGap(49, 80, Short.MAX_VALUE))))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pThongTin_TimKiemLayout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblThongTin_MaNV1)
                    .addComponent(lblThongTin_TongTien1)
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addComponent(btnTimKiem_TimKiem)
                        .addGap(18, 18, 18)
                        .addComponent(btnTimKiem_HuyTimKiem)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnTimKiem_Trong1))
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(rdbtnThongTin_Tang)
                            .addComponent(lblThongTin_MaKM1))
                        .addGap(18, 18, 18)
                        .addComponent(rdbtnThongTin_Giam)))
                .addContainerGap(21, Short.MAX_VALUE))
        );
        pThongTin_TimKiemLayout.setVerticalGroup(
            pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addComponent(lblThongTin_MaHD1)
                        .addGap(18, 18, 18)
                        .addComponent(lblThongTin_MaKH1)
                        .addGap(18, 18, 18)
                        .addComponent(lblThongTin_MaNV1)
                        .addGap(18, 18, 18)
                        .addComponent(lblThongTin_MaKM1))
                    .addGroup(pThongTin_TimKiemLayout.createSequentialGroup()
                        .addGap(0, 6, Short.MAX_VALUE)
                        .addComponent(tfTimKiem_MaHD1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(tfTimKiem_MaKH1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(tfTimKiem_MaNV1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(tfTimKiem_MaKM1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblThongTin_TongTien1)
                    .addComponent(tfTimKiem_TongTien1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(rdbtnThongTin_Tang)
                    .addComponent(rdbtnThongTin_Giam))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 12, Short.MAX_VALUE)
                .addGroup(pThongTin_TimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnTimKiem_TimKiem)
                    .addComponent(btnTimKiem_HuyTimKiem)
                    .addComponent(btnTimKiem_Trong1))
                .addContainerGap())
        );

        javax.swing.GroupLayout pThongTinLayout = new javax.swing.GroupLayout(pThongTin);
        pThongTin.setLayout(pThongTinLayout);
        pThongTinLayout.setHorizontalGroup(
            pThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pThongTinLayout.createSequentialGroup()
                .addComponent(lblThongTin_ThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, 198, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lblThongTin_TimKiem, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(pThongTinLayout.createSequentialGroup()
                .addComponent(pThongTin_ThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0)
                .addComponent(pThongTin_TimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addComponent(jScrollPane2)
        );
        pThongTinLayout.setVerticalGroup(
            pThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pThongTinLayout.createSequentialGroup()
                .addGroup(pThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblThongTin_TimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblThongTin_ThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, 74, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pThongTinLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pThongTin_ThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(pThongTin_TimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE))
        );

        pChiTiet.setBackground(colorPanel_Center);
        pChiTiet.setBorder(javax.swing.BorderFactory.createLineBorder(colorPanel_Top, 5));
        pChiTiet.setPreferredSize(new java.awt.Dimension(880, 580));

        tblThongTin1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã SP", "Mã HĐ", "Số Lượng", "Giá Bán", "Mã Khuyến Mãi", "Tỉ Lệ KM"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblThongTin1.setGridColor(new java.awt.Color(102, 255, 102));
        tblThongTin1.setSelectionBackground(new java.awt.Color(204, 204, 204));
        tblThongTin1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblThongTin1MouseClicked(evt);
            }
        });
        jScrollPane3.setViewportView(tblThongTin1);
        if (tblThongTin1.getColumnModel().getColumnCount() > 0) {
            tblThongTin1.getColumnModel().getColumn(0).setPreferredWidth(60);
            tblThongTin1.getColumnModel().getColumn(1).setPreferredWidth(60);
            tblThongTin1.getColumnModel().getColumn(2).setPreferredWidth(60);
            tblThongTin1.getColumnModel().getColumn(3).setPreferredWidth(60);
            tblThongTin1.getColumnModel().getColumn(4).setPreferredWidth(60);
            tblThongTin1.getColumnModel().getColumn(5).setPreferredWidth(60);
        }

        lblChiTiet_ChiTietHoaDon.setFont(new java.awt.Font("Arial", 1, 36)); // NOI18N
        lblChiTiet_ChiTietHoaDon.setForeground(colorText);
        lblChiTiet_ChiTietHoaDon.setText("Chi Tiết Hóa Đơn");

        pChiTietSanPham.setBackground(colorPanel_Center);

        lblChiTiet_SL.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_SL.setForeground(colorText);
        lblChiTiet_SL.setText("Số Lượng");

        btnChiTiet_Xoa.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnChiTiet_Xoa.setText("Xóa");
        btnChiTiet_Xoa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChiTiet_XoaActionPerformed(evt);
            }
        });

        lblChiTiet_Gia.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_Gia.setForeground(colorText);
        lblChiTiet_Gia.setText("Giá Bán");

        btnChiTiet_Sua.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnChiTiet_Sua.setText("Sửa");
        btnChiTiet_Sua.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChiTiet_SuaActionPerformed(evt);
            }
        });

        tfChiTiet_MaSP.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfChiTiet_MaSP.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tfChiTiet_MaSPMouseClicked(evt);
            }
        });

        tfChiTiet_MaHD.setEditable(false);
        tfChiTiet_MaHD.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        tfChiTiet_SL.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        tfChiTiet_SL.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tfChiTiet_SLActionPerformed(evt);
            }
        });

        lblChiTiet_MaSP.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_MaSP.setForeground(colorText);
        lblChiTiet_MaSP.setText("Mã Sản Phẩm");

        tfChiTiet_Gia.setEditable(false);
        tfChiTiet_Gia.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        lblChiTiet_MaHD.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_MaHD.setForeground(colorText);
        lblChiTiet_MaHD.setText("Mã Hóa Đơn");

        btnChiTiet_Them.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnChiTiet_Them.setText("Thêm");
        btnChiTiet_Them.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChiTiet_ThemActionPerformed(evt);
            }
        });

        lblChiTiet_3cham.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/40_20/3 chấm đen.png"))); // NOI18N
        lblChiTiet_3cham.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblChiTiet_3chamMouseClicked(evt);
            }
        });

        btnChiTiet_TaoMoi.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        btnChiTiet_TaoMoi.setText("Tạo mới");
        btnChiTiet_TaoMoi.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChiTiet_TaoMoiActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pChiTietSanPhamLayout = new javax.swing.GroupLayout(pChiTietSanPham);
        pChiTietSanPham.setLayout(pChiTietSanPhamLayout);
        pChiTietSanPhamLayout.setHorizontalGroup(
            pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pChiTietSanPhamLayout.createSequentialGroup()
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pChiTietSanPhamLayout.createSequentialGroup()
                        .addGap(22, 22, 22)
                        .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblChiTiet_MaSP)
                            .addComponent(lblChiTiet_MaHD)
                            .addComponent(lblChiTiet_SL)
                            .addComponent(lblChiTiet_Gia))
                        .addGap(38, 38, 38)
                        .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(tfChiTiet_MaHD, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(pChiTietSanPhamLayout.createSequentialGroup()
                                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(tfChiTiet_MaSP)
                                    .addComponent(tfChiTiet_Gia)
                                    .addComponent(tfChiTiet_SL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 100, Short.MAX_VALUE))
                                .addGap(18, 18, 18)
                                .addComponent(lblChiTiet_3cham))))
                    .addGroup(pChiTietSanPhamLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(btnChiTiet_Them)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnChiTiet_Xoa)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnChiTiet_Sua)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnChiTiet_TaoMoi)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pChiTietSanPhamLayout.setVerticalGroup(
            pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pChiTietSanPhamLayout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(lblChiTiet_MaSP)
                        .addComponent(tfChiTiet_MaSP, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(lblChiTiet_3cham, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(12, 12, 12)
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblChiTiet_MaHD)
                    .addComponent(tfChiTiet_MaHD, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(14, 14, 14)
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblChiTiet_SL)
                    .addComponent(tfChiTiet_SL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblChiTiet_Gia)
                    .addComponent(tfChiTiet_Gia, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(pChiTietSanPhamLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnChiTiet_Them)
                    .addComponent(btnChiTiet_Xoa)
                    .addComponent(btnChiTiet_Sua)
                    .addComponent(btnChiTiet_TaoMoi))
                .addContainerGap())
        );

        pChiTietTimKiem.setBackground(colorPanel_Center);
        pChiTietTimKiem.setForeground(colorText);
        pChiTietTimKiem.setPreferredSize(new java.awt.Dimension(380, 238));

        lblChiTiet_SoLuong2.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_SoLuong2.setForeground(colorText);
        lblChiTiet_SoLuong2.setText("Số Lượng");

        jButton4.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        jButton4.setText("Hủy Tìm Kiếm");
        jButton4.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton4MouseClicked(evt);
            }
        });

        jButton5.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        jButton5.setText("Trống");
        jButton5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton5MouseClicked(evt);
            }
        });

        tfChiTiet_MaSP2.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        lblChiTiet_MaSP1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblChiTiet_MaSP1.setForeground(colorText);
        lblChiTiet_MaSP1.setText("Mã Sản Phẩm");

        jButton6.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        jButton6.setText("Tìm Kiếm");
        jButton6.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton6MouseClicked(evt);
            }
        });
        jButton6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton6ActionPerformed(evt);
            }
        });

        lblMuiTen.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblMuiTen.setForeground(colorText);
        lblMuiTen.setText("->");

        lblMuiTen1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        lblMuiTen1.setForeground(colorText);
        lblMuiTen1.setText("->");

        lblChiTiet_3cham1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/40_20/3 chấm đen.png"))); // NOI18N
        lblChiTiet_3cham1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblChiTiet_3cham1MouseClicked(evt);
            }
        });

        lblChiTiet_3cham2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/40_20/3 chấm đen.png"))); // NOI18N
        lblChiTiet_3cham2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblChiTiet_3cham2MouseClicked(evt);
            }
        });

        tfChiTiet_SL2.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        tfChiTiet_SL3.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        tfChiTiet_MaSP3.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N

        rdbtnCT_Tang.setBackground(colorPanel_Center);
        buttonGroup2.add(rdbtnCT_Tang);
        rdbtnCT_Tang.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Tang.setForeground(colorText);
        rdbtnCT_Tang.setText("Tăng dần");

        rdbtnCT_Giam.setBackground(colorPanel_Center);
        buttonGroup2.add(rdbtnCT_Giam);
        rdbtnCT_Giam.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Giam.setForeground(colorText);
        rdbtnCT_Giam.setText("Giảm dần");

        rdbtnCT_Giam1.setBackground(colorPanel_Center);
        buttonGroup3.add(rdbtnCT_Giam1);
        rdbtnCT_Giam1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Giam1.setForeground(colorText);
        rdbtnCT_Giam1.setText("Giảm dần");

        rdbtnCT_Tang1.setBackground(colorPanel_Center);
        buttonGroup3.add(rdbtnCT_Tang1);
        rdbtnCT_Tang1.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Tang1.setForeground(colorText);
        rdbtnCT_Tang1.setText("Tăng dần");

        rdbtnCT_Khong2.setBackground(colorPanel_Center);
        buttonGroup3.add(rdbtnCT_Khong2);
        rdbtnCT_Khong2.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Khong2.setForeground(colorText);
        rdbtnCT_Khong2.setText("không");

        rdbtnCT_Khong.setBackground(colorPanel_Center);
        buttonGroup2.add(rdbtnCT_Khong);
        rdbtnCT_Khong.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        rdbtnCT_Khong.setForeground(colorText);
        rdbtnCT_Khong.setText("không");

        javax.swing.GroupLayout pChiTietTimKiemLayout = new javax.swing.GroupLayout(pChiTietTimKiem);
        pChiTietTimKiem.setLayout(pChiTietTimKiemLayout);
        pChiTietTimKiemLayout.setHorizontalGroup(
            pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton6)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton5)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pChiTietTimKiemLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                        .addComponent(rdbtnCT_Tang)
                        .addGap(31, 31, 31)
                        .addComponent(rdbtnCT_Giam)
                        .addGap(18, 18, 18)
                        .addComponent(rdbtnCT_Khong))
                    .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                        .addComponent(tfChiTiet_MaSP2, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblChiTiet_3cham1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(lblMuiTen)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(tfChiTiet_MaSP3, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(12, 12, 12)
                        .addComponent(lblChiTiet_3cham2))
                    .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                        .addComponent(lblChiTiet_SoLuong2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(tfChiTiet_SL2, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(lblMuiTen1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(tfChiTiet_SL3, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(lblChiTiet_MaSP1)
                    .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                        .addComponent(rdbtnCT_Tang1)
                        .addGap(31, 31, 31)
                        .addComponent(rdbtnCT_Giam1)
                        .addGap(18, 18, 18)
                        .addComponent(rdbtnCT_Khong2)))
                .addGap(168, 168, 168))
        );
        pChiTietTimKiemLayout.setVerticalGroup(
            pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pChiTietTimKiemLayout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addComponent(lblChiTiet_MaSP1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(tfChiTiet_MaSP2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(lblMuiTen)
                        .addComponent(tfChiTiet_MaSP3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(lblChiTiet_3cham1, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblChiTiet_3cham2, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(rdbtnCT_Tang)
                    .addComponent(rdbtnCT_Giam)
                    .addComponent(rdbtnCT_Khong))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblChiTiet_SoLuong2)
                    .addComponent(lblMuiTen1)
                    .addComponent(tfChiTiet_SL2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(tfChiTiet_SL3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(rdbtnCT_Tang1)
                    .addComponent(rdbtnCT_Giam1)
                    .addComponent(rdbtnCT_Khong2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 25, Short.MAX_VALUE)
                .addGroup(pChiTietTimKiemLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton6)
                    .addComponent(jButton4)
                    .addComponent(jButton5))
                .addContainerGap())
        );

        lblChiTiet_Tatca.setBackground(new java.awt.Color(255, 51, 51));
        lblChiTiet_Tatca.setFont(new java.awt.Font("Arial", 1, 36)); // NOI18N
        lblChiTiet_Tatca.setForeground(colorText);
        lblChiTiet_Tatca.setText("Tất cả");
        lblChiTiet_Tatca.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblChiTiet_TatcaMouseClicked(evt);
            }
        });

        lblChiTiet_Xuat.setBackground(new java.awt.Color(255, 51, 51));
        lblChiTiet_Xuat.setFont(new java.awt.Font("Arial", 1, 36)); // NOI18N
        lblChiTiet_Xuat.setForeground(colorText);
        lblChiTiet_Xuat.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/Button Menu/50_50/icons8-print.png"))); // NOI18N
        lblChiTiet_Xuat.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblChiTiet_XuatMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout pChiTietLayout = new javax.swing.GroupLayout(pChiTiet);
        pChiTiet.setLayout(pChiTietLayout);
        pChiTietLayout.setHorizontalGroup(
            pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pChiTietLayout.createSequentialGroup()
                .addGroup(pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pChiTietLayout.createSequentialGroup()
                        .addComponent(pChiTietSanPham, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(pChiTietTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 387, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 15, Short.MAX_VALUE))
                    .addComponent(jScrollPane3))
                .addGap(5, 5, 5))
            .addGroup(pChiTietLayout.createSequentialGroup()
                .addGap(61, 61, 61)
                .addComponent(lblChiTiet_ChiTietHoaDon)
                .addGap(73, 73, 73)
                .addComponent(lblChiTiet_Tatca, javax.swing.GroupLayout.PREFERRED_SIZE, 116, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(64, 64, 64)
                .addComponent(lblChiTiet_Xuat)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pChiTietLayout.setVerticalGroup(
            pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pChiTietLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addGroup(pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblChiTiet_Xuat)
                    .addGroup(pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(lblChiTiet_ChiTietHoaDon)
                        .addComponent(lblChiTiet_Tatca)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pChiTietLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(pChiTietSanPham, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(pChiTietTimKiem, javax.swing.GroupLayout.DEFAULT_SIZE, 247, Short.MAX_VALUE))
                .addGap(20, 20, 20)
                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 232, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout pCenterLayout = new javax.swing.GroupLayout(pCenter);
        pCenter.setLayout(pCenterLayout);
        pCenterLayout.setHorizontalGroup(
            pCenterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pCenterLayout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(pThongTin, javax.swing.GroupLayout.PREFERRED_SIZE, 430, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(pChiTiet, javax.swing.GroupLayout.PREFERRED_SIZE, 789, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        pCenterLayout.setVerticalGroup(
            pCenterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pCenterLayout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(pCenterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pThongTin, javax.swing.GroupLayout.DEFAULT_SIZE, 572, Short.MAX_VALUE)
                    .addComponent(pChiTiet, javax.swing.GroupLayout.DEFAULT_SIZE, 572, Short.MAX_VALUE))
                .addContainerGap())
        );

        getContentPane().add(pCenter, java.awt.BorderLayout.CENTER);

        pTop.setBackground(colorPanel_Top);
        pTop.setPreferredSize(new java.awt.Dimension(1280, 70));
        getContentPane().add(pTop, java.awt.BorderLayout.NORTH);

        menuTaiKhoan.setText("Tài khoản");

        menuTaiKhoan_ThongTin.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/user.png"))); // NOI18N
        menuTaiKhoan_ThongTin.setText("Thông tin");
        menuTaiKhoan_ThongTin.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                menuTaiKhoan_ThongTinMouseReleased(evt);
            }
        });
        menuTaiKhoan.add(menuTaiKhoan_ThongTin);

        menuTaiKhoan_DangXuat.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ShoesManager/images/logout.png"))); // NOI18N
        menuTaiKhoan_DangXuat.setText("Đăng xuất");
        menuTaiKhoan_DangXuat.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                menuTaiKhoan_DangXuatMouseReleased(evt);
            }
        });
        menuTaiKhoan.add(menuTaiKhoan_DangXuat);

        menubar.add(menuTaiKhoan);

        menuThanhCongcu.setText("Ẩn thanh công cụ");
        menuThanhCongcu.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuThanhCongcuMouseClicked(evt);
            }
        });
        menubar.add(menuThanhCongcu);

        MenuMauNen.setText("Màu nền");

        buttonGroup_MauNen.add(rdbtnThongTin_MauCam);
        rdbtnThongTin_MauCam.setSelected(true);
        rdbtnThongTin_MauCam.setText("Màu cam/ trắng");
        rdbtnThongTin_MauCam.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                rdbtnThongTin_MauCamMouseReleased(evt);
            }
        });
        rdbtnThongTin_MauCam.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdbtnThongTin_MauCamActionPerformed(evt);
            }
        });
        MenuMauNen.add(rdbtnThongTin_MauCam);

        buttonGroup_MauNen.add(rdbtnThongTin_MauDen);
        rdbtnThongTin_MauDen.setText("Màu đen/ đen");
        rdbtnThongTin_MauDen.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                rdbtnThongTin_MauDenMouseReleased(evt);
            }
        });
        rdbtnThongTin_MauDen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdbtnThongTin_MauDenActionPerformed(evt);
            }
        });
        MenuMauNen.add(rdbtnThongTin_MauDen);

        buttonGroup_MauNen.add(rdbtnThongTin_Mautrang);
        rdbtnThongTin_Mautrang.setText("Màu trắng/ xanh");
        rdbtnThongTin_Mautrang.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                rdbtnThongTin_MautrangMouseReleased(evt);
            }
        });
        rdbtnThongTin_Mautrang.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdbtnThongTin_MautrangActionPerformed(evt);
            }
        });
        MenuMauNen.add(rdbtnThongTin_Mautrang);

        menubar.add(MenuMauNen);

        menuTroVe.setText("Trở về");
        menuTroVe.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuTroVeMouseClicked(evt);
            }
        });
        menubar.add(menuTroVe);

        menuThoat.setText("Thoát");
        menuThoat.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuThoatMouseClicked(evt);
            }
        });
        menubar.add(menuThoat);

        setJMenuBar(menubar);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    
    public void actionVisiblePanel(){
        pThongTin_ThongTin.setVisible(false);
        pThongTin_TimKiem.setVisible(false);
    }
    
    private void lblThongTin_ThongTinMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblThongTin_ThongTinMouseReleased
        // TODO add your handling code here:
        actionVisiblePanel();
        pThongTin_ThongTin.setVisible(true);
    }//GEN-LAST:event_lblThongTin_ThongTinMouseReleased

    private void lblThongTin_TimKiemMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblThongTin_TimKiemMouseReleased
        // TODO add your handling code here:
        actionVisiblePanel();
        pThongTin_TimKiem.setVisible(true);
    }//GEN-LAST:event_lblThongTin_TimKiemMouseReleased

    private void btnThongTin_TrongActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThongTin_TrongActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnThongTin_TrongActionPerformed

    private void btnTimKiem_TimKiemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTimKiem_TimKiemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnTimKiem_TimKiemActionPerformed

    private void btnTimKiem_HuyTimKiemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTimKiem_HuyTimKiemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnTimKiem_HuyTimKiemActionPerformed

    private void btnTimKiem_Trong1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTimKiem_Trong1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnTimKiem_Trong1ActionPerformed

    private void tfTimKiem_MaKH1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tfTimKiem_MaKH1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tfTimKiem_MaKH1ActionPerformed

    
    public void nhapLuongKH() throws Exception{
        KhachHangBUS bus =new KhachHangBUS();
        ArrayList<KhachHangDTO> arr =bus.getList_KH();
        String[] s = new String[bus.getNumbKH()];
        int i = 0;
        for (KhachHangDTO dto : arr) {
            s[i] = dto.getStrMaKH();
            i++;
            System.out.println(dto.getStrMaKH());
        }
        cbbThongTin_MaKH.setModel(new DefaultComboBoxModel<>(s));
    }
    
    public void nhapLuongKM() throws Exception{
        KhuyenMaiBUS bus =new KhuyenMaiBUS();
        ArrayList<KhuyenMaiDTO> arr =bus.getList_KM();
        String[] s = new String[bus.getNumbKM()];
        int i = 0;
        for (KhuyenMaiDTO dto : arr) {
            s[i] = dto.getStrMaKM();
            i++;
            System.out.println(dto.getStrMaKM());
        }
        cbbThongTin_MaKM.setModel(new DefaultComboBoxModel<>(s));
    }
    
    private void anHienCacNut(boolean bl) {
        // hiển thị nút btn
        btnThongTin_Them.setEnabled(bl);
        btnThongTin_Xoa.setEnabled(bl);
        btnThongTin_Sua1.setEnabled(bl);
        
        btnChiTiet_Sua.setEnabled(bl);
        btnChiTiet_TaoMoi.setEnabled(bl);
        btnChiTiet_Them.setEnabled(bl);
        btnChiTiet_Xoa.setEnabled(bl);
        
        // không cho chỉnh sửa
        tfChiTiet_MaSP.setEditable(bl);
        tfChiTiet_SL.setEditable(bl);
    }
    
    private void tblThongTinMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblThongTinMouseClicked
        // TODO add your handling code here:
        int  i=tblThongTin.getSelectedRow();
        
        tfThongTin_MaHD.setText(tblThongTin.getModel().getValueAt(i, 0).toString());
        cbbThongTin_MaKH.setSelectedItem(tblThongTin.getModel().getValueAt(i, 1));
        tfThongTin_MaNV.setText(tblThongTin.getModel().getValueAt(i, 2).toString());         
        cbbThongTin_MaKM.setSelectedItem(tblThongTin.getModel().getValueAt(i, 3));
        Date date = new Date((String) tblThongTin.getModel().getValueAt(i, 4));
        calendarThongTin.setDate(date);
        tfThongTin_TongTien.setText(tblThongTin.getModel().getValueAt(i, 5).toString());
        // lấy thông tin
        TongTien = Double.parseDouble(tfThongTin_TongTien.getText());
        
        // hiển thị tên nv và kh
        HoaDonDTO hd = new HoaDonDTO();
        hd = list_HD.getInfor(tfThongTin_MaHD.getText());
        KhachHangDTO kh = list_KH.getInfor(tblThongTin.getModel().getValueAt(i, 1).toString());
        tfThongTin_TenKH.setText(kh.getStrHo() + " " + kh.getStrTen());
        
//        HoaDonDTO hd = new HoaDonDTO();
        hoadon.setStrMaHD( tfThongTin_MaHD.getText());
        hoadon.setStrMaKH((String) cbbThongTin_MaKH.getSelectedItem());
        hoadon.setStrMaKM((String) cbbThongTin_MaKM.getSelectedItem());
        hoadon.setStrMaNV(tfThongTin_MaNV.getText());
        hoadon.setStrNgayBan((String) tblThongTin.getModel().getValueAt(i, 4));
        hoadon.setTongTien(Double.parseDouble(tfThongTin_TongTien.getText()));
        System.out.println(hoadon.toString());
        
        // hiển thị bên chi tiết
        actionButtondisplayChiTiet(tfThongTin_MaHD.getText());
        
        anHienCacNut(false);
        
        if (TongTien == 0) {
            btnThongTin_Xoa.setEnabled(true);
         }
        
        System.out.println(date1 +" ------ " 
                + tblThongTin.getModel().getValueAt(i, 4).toString() );
        if ( cachamquantrong.kiemTraDate(date1,
                tblThongTin.getModel().getValueAt(i, 4).toString())) {
            btnThongTin_Sua1.setEnabled(true);
            btnChiTiet_Them.setEnabled(true);
            btnChiTiet_Sua.setEnabled(true);
            btnChiTiet_Xoa.setEnabled(true);
            btnChiTiet_TaoMoi.setEnabled(true);
        }
        
        tfChiTiet_MaSP.setText("");
        tfChiTiet_MaHD.setText("");
        tfChiTiet_SL.setText("");
        tfChiTiet_Gia.setText("");
    }//GEN-LAST:event_tblThongTinMouseClicked

    private void btnThongTin_TrongMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnThongTin_TrongMouseClicked
        try {
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }

        btnThongTin_Sua1.setEnabled(true);
        btnThongTin_Xoa.setEnabled(true);
        TongTien = 0;
        
        tfThongTin_MaHD.setText(list_HD.getDefaultMaHD());
        cbbThongTin_MaKH.setSelectedIndex(0);
        tfThongTin_MaNV.setText(Memory.maNV);         
        cbbThongTin_MaKM.setSelectedIndex(0);
        tfThongTin_TongTien.setText("");
        
        tfChiTiet_MaSP.setText("");
        tfChiTiet_SL.setText("");
        tfChiTiet_Gia.setText("");
        tfThongTin_TenKH.setText("");
        tfChiTiet_MaHD.setText(tfThongTin_MaHD.getText());
        
        String s = LocalDateTime.now().getDayOfMonth() + " " +
                LocalDateTime.now().getYear() + " " +
                LocalDateTime.now().getMonth() ;
        System.out.println(s);
        
        Date date = new Date(s);
        calendarThongTin.setDate(date);
        
        tfThongTin_MaHD.requestFocus();
        
        anHienCacNut(false);
        btnThongTin_Them.setEnabled(true);
        
        // xóa thông tin bên chi tiết
        actionButtondisplayChiTiet(tfThongTin_MaHD.getText());
    }//GEN-LAST:event_btnThongTin_TrongMouseClicked

    private void tfThongTin_MaHDMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tfThongTin_MaHDMouseClicked
        // TODO add your handling code here:
        System.out.println("Click here PLae");
    }//GEN-LAST:event_tfThongTin_MaHDMouseClicked

    private void tfChiTiet_SLActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tfChiTiet_SLActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tfChiTiet_SLActionPerformed

    private void btnChiTiet_TaoMoiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChiTiet_TaoMoiActionPerformed
        // TODO add your handling code here:
        tfChiTiet_MaSP.setText("");
        tfChiTiet_MaHD.setText(hoadon.getStrMaHD());
        tfChiTiet_Gia.setText("");
        tfChiTiet_SL.setText("");
        
        tfChiTiet_MaSP.setEditable(true);
        tfChiTiet_SL.setEditable(true);
    }//GEN-LAST:event_btnChiTiet_TaoMoiActionPerformed

    private void rdbtnThongTin_MautrangActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MautrangActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_rdbtnThongTin_MautrangActionPerformed

    private void rdbtnThongTin_MauDenActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MauDenActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_rdbtnThongTin_MauDenActionPerformed

    private void rdbtnThongTin_MauCamActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MauCamActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_rdbtnThongTin_MauCamActionPerformed

    private void rdbtnThongTin_MauCamMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MauCamMouseReleased
        Memory.colorThemes =  new Color(250, 160, 100);
        Memory.colorThemes_2 = new Color(255, 255, 255);
        Memory.colorText = new Color(0, 0, 0);
        colorPanel_Top = Memory.colorThemes;
        colorPanel_Center = Memory.colorThemes_2;
        colorText = Memory.colorText;
        setTextColor("đen");
        System.out.println("da thay doi mau nen thanh cam trang");        // TODO add your handling code here:
    }//GEN-LAST:event_rdbtnThongTin_MauCamMouseReleased

    private void rdbtnThongTin_MauDenMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MauDenMouseReleased
        // TODO add your handling code here:
        Memory.colorThemes =  new Color(0, 0, 0);
        Memory.colorThemes_2 = new Color(0, 0, 0);
        Memory.colorText = new Color(255, 255, 255);
        colorPanel_Top = Memory.colorThemes;
        colorPanel_Center = Memory.colorThemes_2;
        colorText = Memory.colorText;
        setTextColor("trắng");
        System.out.println("da thay doi mau nen thanh den");
    }//GEN-LAST:event_rdbtnThongTin_MauDenMouseReleased

    private void rdbtnThongTin_MautrangMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdbtnThongTin_MautrangMouseReleased
        // TODO add your handling code here:
        Memory.colorThemes =  new Color(255, 255, 255);
        Memory.colorThemes_2 = new Color(131,189,246);
        Memory.colorText = new Color(0, 0, 0);
        colorPanel_Top = Memory.colorThemes;
        colorPanel_Center = Memory.colorThemes_2;
        colorText = Memory.colorText;
        setTextColor("đen");
        System.out.println("da thay doi mau nen thanh trang");
    }//GEN-LAST:event_rdbtnThongTin_MautrangMouseReleased

    private void menuThanhCongcuMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuThanhCongcuMouseClicked
        // TODO add your handling code here:
        if ( Memory.flag_Menu ) {
            pTop.setVisible(false);
            menuThanhCongcu.setText("Hiện thanh công cụ");
            Memory.flag_Menu = false;
        }
        else {
            pTop.setVisible(true);
            menuThanhCongcu.setText("Ẩn thanh công cụ");
            Memory.flag_Menu = true;
        }
    }//GEN-LAST:event_menuThanhCongcuMouseClicked

    private void menuTroVeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuTroVeMouseClicked
        // TODO add your handling code here:
        Home home;
        try {
            home = new Home();
            home.setVisible(true);
            setVisible(false);
        } catch (Exception e) {
            System.out.println("Lỗi");
        }
    }//GEN-LAST:event_menuTroVeMouseClicked

    private void menuTaiKhoan_ThongTinMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuTaiKhoan_ThongTinMouseReleased

        // TODO add your handling code here:
        UserInfor ui = new UserInfor();
        ui.setVisible(true);
    }//GEN-LAST:event_menuTaiKhoan_ThongTinMouseReleased

    private void menuTaiKhoan_DangXuatMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuTaiKhoan_DangXuatMouseReleased
        // TODO add your handling code here:
        Login lg;
        try {
            lg = new Login();
            lg.setVisible(true);
            this.setVisible(false);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_menuTaiKhoan_DangXuatMouseReleased

    private void menuThoatMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_menuThoatMouseClicked
        // TODO add your handling code here:
        Question_YesNO Q = new Question_YesNO("Bạn có muốn thoát không?");
        Q.setVisible(true);
        
    }//GEN-LAST:event_menuThoatMouseClicked

    private void tblThongTin1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblThongTin1MouseClicked
        // TODO add your handling code here:
        int  i=tblThongTin1.getSelectedRow();
        
        tfChiTiet_MaSP.setText(tblThongTin1.getModel().getValueAt(i, 0).toString());
        tfChiTiet_MaHD.setText(tblThongTin1.getModel().getValueAt(i, 1).toString());
        tfChiTiet_SL.setText(tblThongTin1.getModel().getValueAt(i, 2).toString());
        tfChiTiet_Gia.setText(tblThongTin1.getModel().getValueAt(i, 3).toString());
    }//GEN-LAST:event_tblThongTin1MouseClicked

    private void actionxoathongtin() {
        HoaDonDTO hd = new HoaDonDTO();
        hd.setStrMaHD( tfThongTin_MaHD.getText());
        
        try {
            list_HD.xoa(hd);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        try {
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        actionButtondisplay();
        
        tfThongTin_MaHD.setText("");
        tfThongTin_TongTien.setText("");
        cbbThongTin_MaKH.setSelectedIndex(0);
        cbbThongTin_MaKM.setSelectedIndex(0);
    }
    
    private void actionSuaMaKM_TT_CT(int i, String strMaKM_Cu, String strMaKM_Moi, ChiTietHDDTO cthd, HoaDonDTO hd) {
        ChiTietKMDTO km  = new ChiTietKMDTO();
        
        // xóa giá cũ
        km = list_ChiTietKM.getInfor(cthd.getStrMaGiay()
                        , strMaKM_Cu);
        
        tinhTongTien(cthd.getiSoLuong(), cthd.getiGiaBan()
                , km.getTiLeKM(), false
        );
        
        // cập nhật lại giá mới
        if ( strMaKM_Moi.toString().equals("") ) {
            // nếu không có tahay đổi gì hết
            // khuyến mãi 0%
            // cộng thẳng giá tiền
            tinhTongTien(cthd.getiSoLuong(), cthd.getiGiaBan()
                , 0, true
            );
        }
        else {
            // nếu là mã khuyến mãi khác
            km = list_ChiTietKM.getInfor(cthd.getStrMaGiay()
                        , strMaKM_Moi);
            
            tinhTongTien(cthd.getiSoLuong(), cthd.getiGiaBan()
                , km.getTiLeKM(), true
            );
        }

        System.out.println("SL va Gia " + cthd.getiSoLuong()+" - "+cthd.getiGiaBan());
        System.out.println("Ti le km: " +  km.getTiLeKM());
        System.out.println("Tong tien mới: " + TongTien);
        
        // cập nhật lại bên table thông tin
        hd.setTongTien(TongTien);
        
        try {
            list_HD.sua(hd);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        actionButtondisplay();
    }
    
    private void jButton6MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton6MouseClicked
        // TODO add your handling code here:
        try {
            // TODO add your handling code here:
            list_ChiTietHD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println(rdbtnCT_Tang.isSelected());
        
        
        
        if (!tfChiTiet_MaSP2.getText().equals(""))
            if (rdbtnCT_Giam.isSelected()) 
                list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_MaSP(tfChiTiet_MaSP2.getText()
                        , tfChiTiet_MaSP3.getText(), -1) );
            else if (rdbtnCT_Tang.isSelected()) 
                list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_MaSP(tfChiTiet_MaSP2.getText()
                        , tfChiTiet_MaSP3.getText(), 1) );
                 else
                    list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_MaSP(tfChiTiet_MaSP2.getText()
                            , tfChiTiet_MaSP3.getText(), 0) );
        
        if (!tfChiTiet_SL2.getText().equals(""))
            if (rdbtnCT_Giam1.isSelected()) 
                list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_SoLuong( Integer.parseInt(tfChiTiet_SL2.getText())
                        , Integer.parseInt(tfChiTiet_SL3.getText()), -1) );
            else if (rdbtnCT_Tang1.isSelected()) 
                    list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_SoLuong( Integer.parseInt(tfChiTiet_SL2.getText())
                    , Integer.parseInt(tfChiTiet_SL3.getText()), 1) );
                 else
                    list_ChiTietHD.setList_HD(list_ChiTietHD.timKiem_SoLuong( Integer.parseInt(tfChiTiet_SL2.getText())
                        , Integer.parseInt(tfChiTiet_SL3.getText()), 0) );
        if (tfThongTin_MaHD.getText().equals(""))
            actionButtondisplayChiTiet();
        else
            actionButtondisplayChiTiet(tfThongTin_MaHD.getText());
        System.out.println("Đang tìm kiếm");
    }//GEN-LAST:event_jButton6MouseClicked

    private void btnTimKiem_TimKiemMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnTimKiem_TimKiemMouseClicked
        try {
            // TODO add your handling code here:
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println(rdbtnThongTin_Tang.isSelected());
        if (!tfTimKiem_MaHD1.getText().equals(""))
            list_HD.setList_HD( list_HD.timKiem_MaHD(tfTimKiem_MaHD1.getText()
                    , rdbtnThongTin_Tang.isSelected()) );
        if (!tfTimKiem_MaKH1.getText().equals(""))
            list_HD.setList_HD( list_HD.timKiem_MaKH(tfTimKiem_MaKH1.getText()
                    , rdbtnThongTin_Tang.isSelected()) );
        if (!tfTimKiem_MaNV1.getText().equals(""))
            list_HD.setList_HD( list_HD.timKiem_MaNV(tfTimKiem_MaNV1.getText()
                    , rdbtnThongTin_Tang.isSelected()) );
        if (!tfTimKiem_MaKM1.getText().equals(""))
            list_HD.setList_HD( list_HD.timKiem_MaKM(tfTimKiem_MaKM1.getText()
                    , rdbtnThongTin_Tang.isSelected()) );
        if (!tfTimKiem_TongTien1.getText().equals(""))
            list_HD.setList_HD( list_HD.timKiem_TongTien(tfTimKiem_TongTien1.getText()
                    , rdbtnThongTin_Tang.isSelected()) );
        actionButtondisplay();
        System.out.println("Đang tìm kiếm");
        
    }//GEN-LAST:event_btnTimKiem_TimKiemMouseClicked

    private void btnTimKiem_HuyTimKiemMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnTimKiem_HuyTimKiemMouseClicked
        try {
            list_HD = new HoaDonBUS();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        try {
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        actionButtondisplay();
    }//GEN-LAST:event_btnTimKiem_HuyTimKiemMouseClicked

    private void btnTimKiem_Trong1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnTimKiem_Trong1MouseClicked

        // TODO add your handling code here:try 
        try{
            list_HD = new HoaDonBUS();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        tfTimKiem_MaHD1.setText("");
        tfTimKiem_MaKH1.setText("");
        tfTimKiem_MaKM1.setText("");
        tfTimKiem_MaNV1.setText("");
        tfTimKiem_TongTien1.setText("");
    }//GEN-LAST:event_btnTimKiem_Trong1MouseClicked

    private void jButton4MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton4MouseClicked
        // TODO add your handling code here: 
        try {
            list_ChiTietHD.docDB();
            if (tfThongTin_MaHD.getText().equals(""))
                actionButtondisplayChiTiet();
            else
                actionButtondisplayChiTiet(tfThongTin_MaHD.getText());
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
    }//GEN-LAST:event_jButton4MouseClicked

    private void jButton5MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton5MouseClicked
        // TODO add your handling code here:
        tfChiTiet_MaSP2.setText("");
        tfChiTiet_MaSP3.setText("");
        tfChiTiet_SL2.setText("");
        tfChiTiet_SL3.setText("");
        
    }//GEN-LAST:event_jButton5MouseClicked

    private void tfThongTin_MaHDActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tfThongTin_MaHDActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tfThongTin_MaHDActionPerformed

    private void btnChiTiet_SuaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChiTiet_SuaActionPerformed
        int  i = tblThongTin1.getSelectedRow();
        
        ChiTietHDDTO hd = new ChiTietHDDTO();
        ChiTietKMDTO km  = new ChiTietKMDTO();
        
        int iSL_SP_LucDau = Integer.parseInt(tblThongTin1.getModel().getValueAt(i, 2).toString());
        
        hd.setStrMaGiay(tfChiTiet_MaSP.getText());
        hd.setStrMaHD(tfChiTiet_MaHD.getText());
        hd.setiGiaBan(Integer.parseInt(tfChiTiet_Gia.getText()));
        hd.setiSoLuong(Integer.parseInt(tfChiTiet_SL.getText()));

        km = list_ChiTietKM.getInfor(hd.getStrMaGiay()
                        , list_HD.getMaKM( hd.getStrMaHD() ));
        
        tinhTongTien(iSL_SP_LucDau
                , Integer.parseInt(tblThongTin1.getModel().getValueAt(i, 3).toString())
                , km.getTiLeKM() , false
        );
        
        try {
            list_ChiTietHD.sua(hd);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
            
        actionButtondisplayChiTiet(hoadon.getStrMaHD());
        
        tinhTongTien(Integer.parseInt(tfChiTiet_Gia.getText())
                , Integer.parseInt(tfChiTiet_SL.getText())
                , km.getTiLeKM() , true
        );
        
        // tính sl sp
        int iCount = iSL_SP_LucDau - hd.getiSoLuong();
        
        chinhSuaSoLuong_SP( hd.getStrMaGiay(), iCount, true);
        
        hoadon.setTongTien(TongTien);
        
        try {
            list_HD.sua(hoadon);
            actionButtondisplay();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        tfChiTiet_Gia.setText("");
        tfChiTiet_MaSP.setText("");
        tfChiTiet_MaHD.setText("");
        tfChiTiet_SL.setText("");
    }//GEN-LAST:event_btnChiTiet_SuaActionPerformed

    private void lblChiTiet_TatcaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblChiTiet_TatcaMouseClicked
        // TODO add your handling code here:
        tfThongTin_MaHD.setText("");
        cbbThongTin_MaKH.setSelectedIndex(0);
        tfThongTin_MaNV.setText(Memory.maNV);         
        cbbThongTin_MaKM.setSelectedItem(0);
        tfThongTin_TongTien.setText("");
        
        
        String s = LocalDateTime.now().getDayOfMonth() + " " +
                LocalDateTime.now().getYear() + " " +
                LocalDateTime.now().getMonth() ;
        System.out.println(s);
        
        Date date = new Date(s);
        calendarThongTin.setDate(date);
        
        actionButtondisplayChiTiet();
    }//GEN-LAST:event_lblChiTiet_TatcaMouseClicked

    public void actionThemHoaDon() {
//        String[] s = String.valueOf(calendarThongTin.getDate()).split("\\ ");
//        System.out.println(s[2] + " " + s[1] + " " +s[5]);
//        System.out.println(calendarThongTin.getDate());
//        String NgayBan = s[2] + " " + s[1] + " " +s[5];
        
        hoadon.setStrMaHD( tfThongTin_MaHD.getText());
        hoadon.setStrMaKH((String) cbbThongTin_MaKH.getSelectedItem());
        hoadon.setStrMaKM((String) cbbThongTin_MaKM.getSelectedItem());
        hoadon.setStrMaNV(tfThongTin_MaNV.getText());
        hoadon.setStrNgayBan(date1);
        
        if (tfThongTin_TongTien.getText().equals(""))
            tfThongTin_TongTien.setText("0");
        hoadon.setTongTien( Double.parseDouble(tfThongTin_TongTien.getText()));
        
        try {
            list_HD.them(hoadon);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        try {
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        tfChiTiet_MaHD.setText(hoadon.getStrMaHD());
        
        tfChiTiet_MaSP.requestFocus();
        tfChiTiet_MaHD.setText(tfThongTin_MaHD.getText());
        
        tfThongTin_MaHD.setText("");
        tfThongTin_TongTien.setText("");
        cbbThongTin_MaKH.setSelectedIndex(0);
        cbbThongTin_MaKM.setSelectedIndex(0);
        tfThongTin_TenKH.setText("");
        
        actionButtondisplay();
        anHienCacNut(true);
    }
    
    private void btnThongTin_ThemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThongTin_ThemActionPerformed
        try {
            list_HD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        KhuyenMaiDTO km = list_KM.getInfor(cbbThongTin_MaKM.getSelectedItem().toString());
        
        String date = LocalDateTime.now().getDayOfMonth() + " " +
                strMonths[LocalDateTime.now().getMonthValue()-1] + " " +
                LocalDateTime.now().getYear();
        
        System.out.println(date);
        System.out.println(km.getStrNgayBatDau());
        System.out.println(km.getStrNgayKetThuc());
        
        if ( cachamquantrong.kiemTraDate(km.getStrNgayBatDau(), date)
                && cachamquantrong.kiemTraDate(date, km.getStrNgayKetThuc())) {
            actionThemHoaDon();
        }
        else {
            JOptionPane.showConfirmDialog(null, "Chương trình khuyến mãi không hợp lệ", "404", JOptionPane.WARNING_MESSAGE);
        }
       
    }//GEN-LAST:event_btnThongTin_ThemActionPerformed

    /**
     * tong tien = tong tien + So Luong * Gia Ban * ti le khuyen mai
     * @param iSoLuong
     * @param iGiaBan
     * @param tiLeKM
     * @param hanhDong true nếu là thêm và false nếu là xóa
     */
    private double tinhTongTien(int iSoLuong, int iGiaBan, double tiLeKM, boolean hanhDong) {
        if (hanhDong)
            TongTien += iSoLuong * iGiaBan * (1 - tiLeKM);
        else
             TongTien -= iSoLuong * iGiaBan * (1 - tiLeKM);
        return TongTien;
    }
    
    
    private void xulyThemChiTietHD(){
        
        try {
            list_ChiTietHD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        ChiTietHDDTO hd = new ChiTietHDDTO();
        ChiTietKMDTO km = new ChiTietKMDTO();
        
        hd.setStrMaGiay(tfChiTiet_MaSP.getText());
        hd.setStrMaHD(tfChiTiet_MaHD.getText());
        hd.setiGiaBan(Integer.parseInt(tfChiTiet_Gia.getText()));
        hd.setiSoLuong(Integer.parseInt(tfChiTiet_SL.getText()));
        
        boolean flag = list_ChiTietHD.kiemTraKhoachinh(hd);
        try {
            if ( !flag ) {
                System.out.println( list_ChiTietHD.them(hd) );
                chinhSuaSoLuong_SP(hd.getStrMaGiay(), hd.getiSoLuong(), false);
                System.out.println("chinh sua san pham hoan tat");
            }
            else 
                JOptionPane.showMessageDialog(null, "Bị trùng mã SP", "Error", JOptionPane.ERROR_MESSAGE);
                
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        try {
            list_ChiTietHD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        actionButtondisplayChiTiet(hoadon.getStrMaHD());
        
        // nếu như thêm vào được
        // ghi dữ liệu
        if ( !flag ) {
            km = list_ChiTietKM.getInfor(hd.getStrMaGiay()
                    , list_HD.getMaKM(hd.getStrMaHD()));
            tinhTongTien(Integer.parseInt(tfChiTiet_SL.getText())
                    , Integer.parseInt(tfChiTiet_Gia.getText())
                    , km.getTiLeKM(), true);
       
            hoadon.setTongTien(TongTien);
            
            try {
                list_HD.sua(hoadon);
            } catch (Exception ex) {
                Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
            }
            
            actionButtondisplay();
        }
        
        tfChiTiet_MaSP.setText("");
        tfChiTiet_SL.setText("");
        tfChiTiet_Gia.setText("");
        tfChiTiet_MaSP.requestFocus();
    }
    
    private boolean kiemTraHangHoa() {
        int iSoLuong = list_SanPham.getSoLuongCuaSanPham(tfChiTiet_MaSP.getText());
        
        if (iSoLuong >= Integer.parseInt(tfChiTiet_SL.getText()) 
                && Integer.parseInt(tfChiTiet_SL.getText()) > 0) 
            return true;
        return false;
    }
    
    private boolean kiemtraMaSP() {
        SanPhamDTO sp = new SanPhamDTO();
        sp = list_SanPham.getInfor(tfChiTiet_MaSP.getText());
        
        if (sp.getStrMaGiay().equals("null"))
            return false;
        
        tfChiTiet_SL.setText(String.valueOf(sp.getiSoLuong()));
        tfChiTiet_Gia.setText(String.valueOf(sp.getiGia()));
        
        return true;
    }
    /**
     * thêm hoặc bớt số lượng sản phẩm
     * @param strMaSP
     * @param iSoLuong so luong can thay doi
     * @param hanhdong <h2>Tăng số lượng sản phẩm là true</h2>
     */
    private void chinhSuaSoLuong_SP(String strMaSP, int iSoLuong, boolean hanhdong) {
        SanPhamDTO sp = new SanPhamDTO();
        
        sp = list_SanPham.getInfor(strMaSP);
        
        if (hanhdong) {
            sp.setiSoLuong( sp.getiSoLuong() + iSoLuong );
            System.out.println("tang so luong sp");
        }
        else {
            sp.setiSoLuong( sp.getiSoLuong() - iSoLuong );
            System.out.println("Giam so luong sp");
        }
            
        System.out.println("aaaaaaaaaaaaaaaaa"+sp.getiSoLuong());
        System.out.println("aaaaaaaaaaaaaaaaa"+sp.getiSoLuong());
        System.out.println("aaaaaaaaaaaaaaaaa"+sp.getiSoLuong());
        System.out.println("aaaaaaaaaaaaaaaaa"+sp.getiSoLuong());
        
        try {
            System.out.println("hanh dong chinh sua sp: "+ list_SanPham.sua(sp) );
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    
    private void actionTFChiTiet() {
        tfChiTiet_MaSP.addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent key){
                if ( key.getKeyCode() == KeyEvent.VK_ENTER ) {
                   if (!kiemtraMaSP()) {
                        JOptionPane.showMessageDialog(null, "SP không tồn tại", "Error", JOptionPane.ERROR_MESSAGE);
                        tfChiTiet_MaSP.requestFocus();
                    }
                    else 
                        tfChiTiet_SL.requestFocus();
                }
            }
        });
        
        tfChiTiet_SL.addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent key){
                if ( key.getKeyCode() == KeyEvent.VK_ENTER ) {
                    btnChiTiet_ThemActionPerformed(null);
                    tfChiTiet_MaSP.requestFocus();
                }
            }
        });
    }
    
    private void btnChiTiet_ThemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChiTiet_ThemActionPerformed
        // TODO add your handling code here:
        if (cachamquantrong.kiemTraDuLieuSo(tfChiTiet_SL.getText()))
            if(kiemTraHangHoa())
                xulyThemChiTietHD();
            else
                JOptionPane.showMessageDialog(null, "Sai số lượng", "Error", JOptionPane.ERROR_MESSAGE);

    }//GEN-LAST:event_btnChiTiet_ThemActionPerformed

    private void actionxoachitiet() {
        ChiTietKMDTO km = new ChiTietKMDTO();
        
        ChiTietHDDTO hd = new ChiTietHDDTO();
        hd.setStrMaGiay(tfChiTiet_MaSP.getText());
        hd.setStrMaHD(tfChiTiet_MaHD.getText());
        hd.setiSoLuong(Integer.parseInt(tfChiTiet_SL.getText()));
        hd.setiGiaBan(Integer.parseInt(tfChiTiet_Gia.getText()));
        
        km = list_ChiTietKM.getInfor(hd.getStrMaGiay()
                    , list_HD.getMaKM(hd.getStrMaHD()));
        
        tinhTongTien( Integer.parseInt(tfChiTiet_SL.getText())
                    , Integer.parseInt(tfChiTiet_Gia.getText())
                    , km.getTiLeKM() , false);
        
        hoadon.setTongTien(TongTien);
        
        try {
            list_HD.sua(hoadon);
            actionButtondisplay();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }

        try {
            list_ChiTietHD.xoa(hd);
            list_ChiTietHD.docDB();
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        chinhSuaSoLuong_SP(hd.getStrMaGiay(), hd.getiSoLuong(), true);
        
        actionButtondisplayChiTiet(hoadon.getStrMaHD());
        
        tfChiTiet_Gia.setText("");
        tfChiTiet_MaSP.setText("");
        tfChiTiet_MaHD.setText("");
        tfChiTiet_SL.setText("");
    }
    
    private void btnChiTiet_XoaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChiTiet_XoaActionPerformed
        // TODO add your handling code here:
        int reply = JOptionPane.showConfirmDialog(null, "Bạn muốn xóa không?", "xóa", JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
           actionxoachitiet();
        } 
        
        
    }//GEN-LAST:event_btnChiTiet_XoaActionPerformed

    private void tfChiTiet_MaSPMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tfChiTiet_MaSPMouseClicked
        // TODO add your handling code here:
        tfChiTiet_Gia.setText("");
        tfChiTiet_SL.setText("");
    }//GEN-LAST:event_tfChiTiet_MaSPMouseClicked

    private void lblChiTiet_XuatMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblChiTiet_XuatMouseClicked
        // TODO add your handling code here:
        if (hoadon.getTongTien() == 0)
            JOptionPane.showMessageDialog(null, "Chưa chọn hóa đơn", "Error", JOptionPane.ERROR_MESSAGE);
        else {
            InHoaDon in = new InHoaDon(hoadon);
            in.setVisible(true);
        }
            
        
    }//GEN-LAST:event_lblChiTiet_XuatMouseClicked

    int x_Mouse, y_Mouse;
    
    private void formMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMousePressed
        // TODO add your handling code here:
         x_Mouse = evt.getX();
         y_Mouse = evt.getY();
    }//GEN-LAST:event_formMousePressed

    private void formMouseDragged(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseDragged
        // TODO add your handling code here:
        int x = evt.getXOnScreen();
        int y = evt.getYOnScreen();
        
        setLocation(x - x_Mouse, y - y_Mouse);
    }//GEN-LAST:event_formMouseDragged

    private void lblChiTiet_3chamMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblChiTiet_3chamMouseClicked
        // TODO add your handling code here:
        ChonSanPham csp = new ChonSanPham(this, true);
        csp.setVisible(true);
        tfChiTiet_MaSP.setText(Memory.maSP);
    }//GEN-LAST:event_lblChiTiet_3chamMouseClicked

    private void btnThongTin_XoaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThongTin_XoaActionPerformed
        // TODO add your handling code here:
        int reply = JOptionPane.showConfirmDialog(null, "Bạn muốn xóa không?", "xóa", JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
           actionxoathongtin();
        } 
        
    }//GEN-LAST:event_btnThongTin_XoaActionPerformed

    private void actionSuaHoaDon() {
        int iPos = 0;
        
        for (int i = 0 ; i < list_HD.getNumbHoaDon() ; i++) {
            HoaDonDTO hd = list_HD.getInfor(i);
            if (hd.getStrMaHD().equals(hoadon.getStrMaHD()))
                iPos = i;
        }
        
        String strMaKM_Cu = tblThongTin.getModel().getValueAt(iPos, 3).toString();
        
//        String[] s = String.valueOf(calendarThongTin.getDate()).split("\\ ");
//        System.out.println(s[2] + " " + s[1] + " " +s[5]);
//        System.out.println(calendarThongTin.getDate());
//        String NgayBan = s[2] + " " + s[1] + " " +s[5];
        
        hoadon.setStrMaHD( tfThongTin_MaHD.getText());
        hoadon.setStrMaKH((String) cbbThongTin_MaKH.getSelectedItem());
        hoadon.setStrMaKM((String) cbbThongTin_MaKM.getSelectedItem());
        hoadon.setStrMaNV(tfThongTin_MaNV.getText());
        hoadon.setStrNgayBan(date1);
        hoadon.setTongTien( Double.parseDouble(tfThongTin_TongTien.getText()));
        
        try {
            list_HD.sua(hoadon);
        } catch (Exception ex) {
            Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        actionButtondisplay();
        actionButtondisplayChiTiet(hoadon.getStrMaHD());
        
        // nếu không sửa đổi mã khuyến mãi
        if (!strMaKM_Cu.equals(hoadon.getStrMaKM()))
            // duyệt hết
            for (int i = 0 ; i < list_ChiTietHD.getNumbChiTietHD() ; i++) {
                ChiTietHDDTO cthd = list_ChiTietHD.getInfor(i);
                // nếu là chi tiết hoa đơn đó
                if (cthd.getStrMaHD().equals(hoadon.getStrMaHD())) {
                    System.out.println(cthd.toString());
                    System.out.println(strMaKM_Cu + " - " + hoadon.getStrMaKM());
                    actionSuaMaKM_TT_CT(i, strMaKM_Cu, hoadon.getStrMaKM(), cthd, hoadon);
                }
            }
        
        if (!tfThongTin_MaHD.getText().equals("")) {
            tfThongTin_MaHD.setText("");
            tfThongTin_TongTien.setText("");
            cbbThongTin_MaKH.setSelectedIndex(0);
            cbbThongTin_MaKM.setSelectedIndex(0);
        }
    }
    private void btnThongTin_Sua1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThongTin_Sua1ActionPerformed
        // TODO add your handling code here:
        KhuyenMaiDTO km = list_KM.getInfor(cbbThongTin_MaKM.getSelectedItem().toString());
        
        String date = LocalDateTime.now().getDayOfMonth() + " " +
                strMonths[LocalDateTime.now().getMonthValue()-1] + " " +
                LocalDateTime.now().getYear();
        
        System.out.println(date);
        System.out.println(km.getStrNgayBatDau());
        System.out.println(km.getStrNgayKetThuc());
        
        if ( cachamquantrong.kiemTraDate(km.getStrNgayBatDau(), date)
                && cachamquantrong.kiemTraDate(date, km.getStrNgayKetThuc())) {
            actionSuaHoaDon();
        }
        else {
            JOptionPane.showConfirmDialog(null, "Chương trình khuyến mãi không hợp lệ", "404", JOptionPane.WARNING_MESSAGE);
        }
        
        
    }//GEN-LAST:event_btnThongTin_Sua1ActionPerformed

    private void cbbThongTin_MaKHActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbbThongTin_MaKHActionPerformed
        // TODO add your handling code here:
        System.out.println(cbbThongTin_MaKH.getSelectedItem().toString());
        KhachHangDTO kh = list_KH.getInfor(cbbThongTin_MaKH.getSelectedItem().toString());
        tfThongTin_TenKH.setText(kh.getStrHo() + " " + kh.getStrTen());
    }//GEN-LAST:event_cbbThongTin_MaKHActionPerformed

    private void lblChiTiet_3cham1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblChiTiet_3cham1MouseClicked
        // TODO add your handling code here:
        ChonSanPham csp = new ChonSanPham(this, true);
        csp.setVisible(true);
        tfChiTiet_MaSP2.setText(Memory.maSP);
    }//GEN-LAST:event_lblChiTiet_3cham1MouseClicked

    private void lblChiTiet_3cham2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblChiTiet_3cham2MouseClicked
        // TODO add your handling code here:
        ChonSanPham csp = new ChonSanPham(this, true);
        csp.setVisible(true);
        tfChiTiet_MaSP3.setText(Memory.maSP);
    }//GEN-LAST:event_lblChiTiet_3cham2MouseClicked

    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton6ActionPerformed

    
    /**
     * Hàm kiểm tra xem cập bậc của nó 
     * 1 : Admin FULL POWER
     * 2 : Nhập xuất file Excel và Thống Kê
     * 3 : Kiểm tra hàng hóa
     * 4 : Nhập Hàng
     * 5 : Khuyến mãi
     * 6 : Hóa đơn
     */
    public void kiemTraCapBac(){
        // truyền tham số cấp bậc chức vụ vào
        int iKey = Memory.iCapBac;
        
        if ( iKey != 1) {
            for (int i  = 0 ; i < strArr_Top.length ; i++) {
                listLblTop[i].setVisible(false);
            }
        }
        
        switch (iKey) {
            case 2:
                listLblTop[6].setVisible(true);
                listLblTop[5].setVisible(true);
                listLblTop[4].setVisible(true);
                break;
            case 3:
                listLblTop[6].setVisible(true);
                listLblTop[3].setVisible(true);
                break;
            case 4:
                listLblTop[6].setVisible(true);
                listLblTop[2].setVisible(true);
                break;
            case 5:
                listLblTop[6].setVisible(true);
                listLblTop[1].setVisible(true);
                break;
            case 6:
                listLblTop[6].setVisible(true);
                listLblTop[0].setVisible(true);
                break;
        }
    }
    
    private void createVectorHeader() {
        if (model.getRowCount()==0) {
            Vector<String> header = new Vector();
            header.add("Mã HĐ");
            header.add("Mã KH");
            header.add("Mã NV");
            header.add("Mã KM");
            header.add("Ngày Bán");
            header.add("Tổng Tiền");
            
            model = new DefaultTableModel(header, 0){
                public boolean isCellEditable(int rowIndex, int columnIndex) {
                    return false;
                }
            };
        }
    }
    
    private void actionButtondisplay() {
        model = new DefaultTableModel();
        
        createVectorHeader();
        for (int i=0 ; i < list_HD.getNumbHoaDon() ; i++) {
            HoaDonDTO hd = new HoaDonDTO();
            
            hd = list_HD.getInfor(i);
            
            createVectorHeader();
            
            Vector row=new Vector();
            row.add(hd.getStrMaHD());
            row.add(hd.getStrMaKH());
            row.add(hd.getStrMaNV());
            row.add(hd.getStrMaKM());
            row.add(hd.getStrNgayBan());
            row.add(hd.getTongTien());
            
            model.addRow(row);
        }
        
        tblThongTin.setModel(model);
        tblThongTin.getColumnModel().getColumn(1).setPreferredWidth(50);
        tblThongTin.getColumnModel().getColumn(3).setPreferredWidth(50);
    }
    private void createVectorHeaderChiTiet() {
        if (modelChiTiet.getRowCount()==0) {
            Vector<String> header = new Vector();
            header.add("Mã Sản Phẩm");
            header.add("Mã Hóa Đơn");
            header.add("Số Lượng");
            header.add("Giá Bán");
            header.add("Mã Khuyến Mãi");
            header.add("Tỉ Lệ KM");
            modelChiTiet = new DefaultTableModel(header, 0) {
                public boolean isCellEditable(int rowIndex, int columnIndex) {
                    return false;
                }
            };
        }
    }
    
    private void actionButtondisplayChiTiet() {
        actionButtondisplayChiTiet("null");
    }
    
    private void actionButtondisplayChiTiet(String strMaHD) {
        modelChiTiet = new DefaultTableModel();
        
        createVectorHeaderChiTiet();
        for (int i=0 ; i < list_ChiTietHD.getNumbChiTietHD() ; i++) {
            ChiTietHDDTO hd = new ChiTietHDDTO();
            
            hd = list_ChiTietHD.getInfor(i);
            
            createVectorHeaderChiTiet();
            
            if ( hd.getStrMaHD().equalsIgnoreCase(strMaHD) || 
                    strMaHD.equals("null")) {
                
                Vector row=new Vector();
                row.add(hd.getStrMaGiay());
                row.add(hd.getStrMaHD());
                row.add(hd.getiSoLuong());
                row.add(hd.getiGiaBan());
                chenMaKM(row, hd.getStrMaGiay(), list_HD.getMaKM(hd.getStrMaHD()));
                modelChiTiet.addRow(row);
            }
        }
        
        tblThongTin1.setModel(modelChiTiet);
    }
    
    private Vector chenMaKM(Vector row, String strMaGiay, String strMaKM) {
        ChiTietKMDTO km = new ChiTietKMDTO();
        boolean flag = false;          
        
        if (strMaKM.equals("null"))
            km = list_ChiTietKM.getInfor(strMaGiay);
        else {
            km = list_ChiTietKM.getInfor(strMaGiay, strMaKM);
            flag = !flag;
            if ( km.getStrMaGiay().equals("null") )    
                flag = !flag;
        }
        
        if (flag) {
            row.add(strMaKM);
            double TiLeKM = km.getTiLeKM() * 100;
            row.add(TiLeKM+"%");
        }
        else {
            row.add("");
            row.add("0%");
        }
        
        return row;
    }
    
    private JPanel createPanel_LblTop(String[] strArr_Top) {
        JPanel Panel = new JPanel();
        listLblTop = new JLabel[10];
        
        Panel.setLayout(new FlowLayout(0,30,10));
        Panel.setBackground(colorPanel_Top);
        
        for (int i=0 ; i < strArr_Top.length ; i++) {
            listLblTop[i] = new JLabel(new ImageIcon("./src/ShoesManager/images/Button Menu/150_50/"+strArr_Top[i]+".png"));
            listLblTop[i].setName(strArr_Top[i]);
            listLblTop[i].setOpaque(true);
            listLblTop[i].addMouseListener(this);
            listLblTop[i].setBackground(colorPanel_Top);
            
            Panel.add(listLblTop[i]);
        }
        
        return Panel;
    }
    
    public void setTextColor(String Mau){
        lblChiTiet_Tatca.setForeground(colorText);
        lblChiTiet_Xuat.setForeground(colorText);       
        lblChiTiet_Gia.setForeground(colorText);
        lblChiTiet_MaHD.setForeground(colorText);
        lblChiTiet_MaSP.setForeground(colorText);
        lblChiTiet_MaSP1.setForeground(colorText);
        lblChiTiet_SL.setForeground(colorText);
        lblThongTin_MaHD.setForeground(colorText);
        lblThongTin_MaHD1.setForeground(colorText);
        lblThongTin_MaKH.setForeground(colorText);
        lblThongTin_MaKH1.setForeground(colorText);
        lblThongTin_MaKM1.setForeground(colorText);
        lblThongTin_MaKM.setForeground(colorText);
        lblThongTin_MaKM1.setForeground(colorText);
        lblThongTin_MaNV.setForeground(colorText);
        lblThongTin_MaNV1.setForeground(colorText);
        lblThongTin_NgayBan.setForeground(colorText);
        lblThongTin_ThongTin.setForeground(colorText);
        lblThongTin_TimKiem.setForeground(colorText);
        lblThongTin_TongTien.setForeground(colorText);
        lblThongTin_TongTien1.setForeground(colorText);
        lblChiTiet_SoLuong2.setForeground(colorText);
        lblChiTiet_ChiTietHoaDon.setForeground(colorText);
        lblMuiTen.setForeground(colorText);
        lblMuiTen1.setForeground(colorText);
        rdbtnThongTin_Giam.setForeground(colorText);
        rdbtnThongTin_Tang.setForeground(colorText);
        rdbtnThongTin_Giam.setBackground(colorPanel_Center);
        rdbtnThongTin_Tang.setBackground(colorPanel_Center);
        rdbtnCT_Giam.setForeground(colorText);
        rdbtnCT_Tang.setForeground(colorText);
        rdbtnCT_Giam.setBackground(colorPanel_Center);
        rdbtnCT_Tang.setBackground(colorPanel_Center);
        rdbtnCT_Giam1.setForeground(colorText);
        rdbtnCT_Tang1.setForeground(colorText);
        rdbtnCT_Giam1.setBackground(colorPanel_Center);
        rdbtnCT_Tang1.setBackground(colorPanel_Center);
        rdbtnCT_Khong.setForeground(colorText);
        rdbtnCT_Khong2.setForeground(colorText);
        rdbtnCT_Khong.setBackground(colorPanel_Center);
        rdbtnCT_Khong2.setBackground(colorPanel_Center);
        
        //-----------------------Đổi màu cho Panel
        pTop.setBackground( colorPanel_Top );
        pCenter.setBackground( colorPanel_Center );
        pChiTiet.setBackground( colorPanel_Center );
        pThongTin.setBackground( colorPanel_Center );
        pThongTin_ThongTin.setBackground( colorPanel_Center );
        pThongTin_TimKiem.setBackground( colorPanel_Center );
        pChiTietSanPham.setBackground( colorPanel_Center );
        pChiTietTimKiem.setBackground( colorPanel_Center );
        
        //---------------------list lbl top
        for (int i=0 ; i < strArr_Top.length ; i++) {
            listLblTop[i].setBackground( colorPanel_Top );
        }
        
        //------------------------0Doi963 màu khung
        pThongTin.setBorder(BorderFactory.createLineBorder(colorPanel_Top, 5) );
        pChiTiet.setBorder(BorderFactory.createLineBorder(colorPanel_Top, 5) );
        lblChiTiet_3cham.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/40_20/3 chấm "+Mau+".png"));
        lblChiTiet_3cham1.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/40_20/3 chấm "+Mau+".png"));
        lblChiTiet_3cham2.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/40_20/3 chấm "+Mau+".png"));
    

    }   
    
    public void colordefault(){
        Color color;
        color = new Color(250, 160, 100);
        if (Memory.colorThemes.getRGB() == color.getRGB() )
            rdbtnThongTin_MauCam.setSelected(true);
        color = new Color(0, 0, 0);
        if (Memory.colorThemes.getRGB() == color.getRGB() )
            rdbtnThongTin_MauDen.setSelected(true);
        color = new Color(255, 255, 255);
        if (Memory.colorThemes.getRGB() == color.getRGB() )
            rdbtnThongTin_Mautrang.setSelected(true);
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(HoaDon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(HoaDon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(HoaDon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(HoaDon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    new HoaDon().setVisible(true);
                } catch (Exception ex) {
                    Logger.getLogger(HoaDon.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenu MenuMauNen;
    private javax.swing.JButton btnChiTiet_Sua;
    private javax.swing.JButton btnChiTiet_TaoMoi;
    private javax.swing.JButton btnChiTiet_Them;
    private javax.swing.JButton btnChiTiet_Xoa;
    private javax.swing.JButton btnThongTin_Sua1;
    private javax.swing.JButton btnThongTin_Them;
    private javax.swing.JButton btnThongTin_Trong;
    private javax.swing.JButton btnThongTin_Xoa;
    private javax.swing.JButton btnTimKiem_HuyTimKiem;
    private javax.swing.JButton btnTimKiem_TimKiem;
    private javax.swing.JButton btnTimKiem_Trong1;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.ButtonGroup buttonGroup3;
    private javax.swing.ButtonGroup buttonGroup_MauNen;
    private com.toedter.calendar.JDateChooser calendarThongTin;
    private javax.swing.JComboBox<String> cbbThongTin_MaKH;
    private javax.swing.JComboBox<String> cbbThongTin_MaKM;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JLabel lblChiTiet_3cham;
    private javax.swing.JLabel lblChiTiet_3cham1;
    private javax.swing.JLabel lblChiTiet_3cham2;
    private javax.swing.JLabel lblChiTiet_ChiTietHoaDon;
    private javax.swing.JLabel lblChiTiet_Gia;
    private javax.swing.JLabel lblChiTiet_MaHD;
    private javax.swing.JLabel lblChiTiet_MaSP;
    private javax.swing.JLabel lblChiTiet_MaSP1;
    private javax.swing.JLabel lblChiTiet_SL;
    private javax.swing.JLabel lblChiTiet_SoLuong2;
    private javax.swing.JLabel lblChiTiet_Tatca;
    private javax.swing.JLabel lblChiTiet_Xuat;
    private javax.swing.JLabel lblMuiTen;
    private javax.swing.JLabel lblMuiTen1;
    private javax.swing.JLabel lblThongTin_MaHD;
    private javax.swing.JLabel lblThongTin_MaHD1;
    private javax.swing.JLabel lblThongTin_MaKH;
    private javax.swing.JLabel lblThongTin_MaKH1;
    private javax.swing.JLabel lblThongTin_MaKM;
    private javax.swing.JLabel lblThongTin_MaKM1;
    private javax.swing.JLabel lblThongTin_MaNV;
    private javax.swing.JLabel lblThongTin_MaNV1;
    private javax.swing.JLabel lblThongTin_NgayBan;
    private javax.swing.JLabel lblThongTin_ThongTin;
    private javax.swing.JLabel lblThongTin_TimKiem;
    private javax.swing.JLabel lblThongTin_TongTien;
    private javax.swing.JLabel lblThongTin_TongTien1;
    private javax.swing.JMenu menuTaiKhoan;
    private javax.swing.JMenuItem menuTaiKhoan_DangXuat;
    private javax.swing.JMenuItem menuTaiKhoan_ThongTin;
    private javax.swing.JMenu menuThanhCongcu;
    private javax.swing.JMenu menuThoat;
    private javax.swing.JMenu menuTroVe;
    private javax.swing.JMenuBar menubar;
    private javax.swing.JPanel pCenter;
    private javax.swing.JPanel pChiTiet;
    private javax.swing.JPanel pChiTietSanPham;
    private javax.swing.JPanel pChiTietTimKiem;
    private javax.swing.JPanel pThongTin;
    private javax.swing.JPanel pThongTin_ThongTin;
    private javax.swing.JPanel pThongTin_TimKiem;
    private javax.swing.JPanel pTop;
    private javax.swing.JRadioButton rdbtnCT_Giam;
    private javax.swing.JRadioButton rdbtnCT_Giam1;
    private javax.swing.JRadioButton rdbtnCT_Khong;
    private javax.swing.JRadioButton rdbtnCT_Khong2;
    private javax.swing.JRadioButton rdbtnCT_Tang;
    private javax.swing.JRadioButton rdbtnCT_Tang1;
    private javax.swing.JRadioButton rdbtnThongTin_Giam;
    private javax.swing.JRadioButtonMenuItem rdbtnThongTin_MauCam;
    private javax.swing.JRadioButtonMenuItem rdbtnThongTin_MauDen;
    private javax.swing.JRadioButtonMenuItem rdbtnThongTin_Mautrang;
    private javax.swing.JRadioButton rdbtnThongTin_Tang;
    private javax.swing.JTable tblThongTin;
    private javax.swing.JTable tblThongTin1;
    private javax.swing.JTextField tfChiTiet_Gia;
    private javax.swing.JTextField tfChiTiet_MaHD;
    private javax.swing.JTextField tfChiTiet_MaSP;
    private javax.swing.JTextField tfChiTiet_MaSP2;
    private javax.swing.JTextField tfChiTiet_MaSP3;
    private javax.swing.JTextField tfChiTiet_SL;
    private javax.swing.JTextField tfChiTiet_SL2;
    private javax.swing.JTextField tfChiTiet_SL3;
    private javax.swing.JTextField tfThongTin_MaHD;
    private javax.swing.JTextField tfThongTin_MaNV;
    private javax.swing.JTextField tfThongTin_TenKH;
    private javax.swing.JTextField tfThongTin_TongTien;
    private javax.swing.JTextField tfTimKiem_MaHD1;
    private javax.swing.JTextField tfTimKiem_MaKH1;
    private javax.swing.JTextField tfTimKiem_MaKM1;
    private javax.swing.JTextField tfTimKiem_MaNV1;
    private javax.swing.JTextField tfTimKiem_TongTien1;
    // End of variables declaration//GEN-END:variables

    
    @Override
    public void mouseClicked(MouseEvent me) {
        JLabel src = (JLabel) me.getSource();
        System.out.println(src.getName() + "is Clicked");
        
    }

    @Override
    public void mousePressed(MouseEvent me) {
        JLabel src = (JLabel) me.getSource();
        System.out.println(src.getName() + "is Pressed");
        src.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/150_50/"+src.getName()+" click.png"));
         
    }

    @Override
    public void mouseReleased(MouseEvent me) {
        JLabel src = (JLabel) me.getSource();
        System.out.println(src.getName() + "is Entered");
        src.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/150_50/"+src.getName()+" hover.png"));
    
        // xử lý nút trở về
        if ( src.getName().equals("Trở về") ) {
            Home home;
            try {
                home = new Home();
                home.setVisible(true);
                setVisible(false);
            } catch (Exception e) {
                System.out.println("Lỗi");
            }
        }
        
        if ( src.getName().equals("Khuyến mãi") ) 
                try {
                    KhuyenMai dm;
                    dm = new KhuyenMai();
                    dm.setVisible(true);
                    setVisible(false);
                } catch (Exception ex) {
                    Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
                } 
        
        if ( src.getName().equals("Nhập hàng") ) 
                try {
                    PhieuNhap hd = new PhieuNhap();
                    hd.setVisible(true);
                    setVisible(false);
                } catch (Exception ex) {
                    Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
                }
        
        if ( src.getName().equals("Hàng hóa") ) 
                try {
                    Sanpham hd = new Sanpham();
                    hd.setVisible(true);
                    setVisible(false);
                } catch (Exception ex) {
                    Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
                }
        
        if ( src.getName().equals("Thống kê") ) 
                try {
                    ThongKe hd;
                    hd = new ThongKe();
                    hd.setVisible(true);
                    setVisible(false);
                } catch (Exception ex) {
                    Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
                }
        
        if ( src.getName().equals("Excel") ) 
                try {
                    Excel hd;
                    hd = new Excel();
                    hd.setVisible(true);
                    setVisible(false);
                } catch (Exception ex) {
                    Logger.getLogger(Home.class.getName()).log(Level.SEVERE, null, ex);
                }
    }

    @Override
    public void mouseEntered(MouseEvent me) {
        JLabel src = (JLabel) me.getSource();
        System.out.println(src.getName() + "is Entered");
        src.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/150_50/"+src.getName()+" hover.png"));
           
    }

    @Override
    public void mouseExited(MouseEvent me) {
        JLabel src = (JLabel) me.getSource();
        System.out.println(src.getName() + "is Exited");
        src.setIcon(new ImageIcon("./src/ShoesManager/images/Button Menu/150_50/"+src.getName()+".png"));
         
    }
}
